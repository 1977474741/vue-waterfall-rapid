(function(t){function e(e){for(var s,a,o=e[0],c=e[1],l=e[2],h=0,m=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);g&&g(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var c=i[o];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},r={app:0},n=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var g=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"21bb":function(t,e,i){"use strict";i("2dad")},"2dad":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],a=(i("5c0b"),i("2877")),o={},c=Object(a["a"])(o,r,n,!1,null,null,null),l=c.exports,g=i("8c4f"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"header"},[i("p",{staticClass:"switch-container"},[i("button",{on:{click:t.modeFun}},[t._v(t._s(t.mode?"点击固定列宽":"点击固定三列"))]),i("button",{staticClass:"repaints",on:{click:t.repaints}},[t._v("点击手动重绘")]),i("button",{on:{click:t.add}},[t._v("添加元素")])]),i("p",{staticClass:"range-container"},[t._v(" 容器宽："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.range,expression:"range"}],attrs:{type:"range",name:""},domProps:{value:t.range},on:{__r:function(e){t.range=e.target.value}}})]),i("p",{staticClass:"switch-container"},[i("label",[t._v(" 容器变化自动重绘 "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.autoResize,expression:"autoResize"}],staticClass:"switch",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.autoResize)?t._i(t.autoResize,null)>-1:t.autoResize},on:{change:function(e){var i=t.autoResize,s=e.target,r=!!s.checked;if(Array.isArray(i)){var n=null,a=t._i(i,n);s.checked?a<0&&(t.autoResize=i.concat([n])):a>-1&&(t.autoResize=i.slice(0,a).concat(i.slice(a+1)))}else t.autoResize=r}}})]),i("label",[t._v(" 始终填满容器 "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fillBox,expression:"fillBox"}],staticClass:"switch",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.fillBox)?t._i(t.fillBox,null)>-1:t.fillBox},on:{change:function(e){var i=t.fillBox,s=e.target,r=!!s.checked;if(Array.isArray(i)){var n=null,a=t._i(i,n);s.checked?a<0&&(t.fillBox=i.concat([n])):a>-1&&(t.fillBox=i.slice(0,a).concat(i.slice(a+1)))}else t.fillBox=r}}})])])]),i("div",{staticClass:"main",style:{width:t.width+"%"},on:{scroll:t.scroll}},[i("waterfall",{ref:"waterfall",attrs:{col:t.col,autoResize:t.autoResize,moveTransitionDuration:.4,fillBox:t.fillBox,"col-width":t.colWidth,list:t.list,imgKey:"src"},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{staticClass:"waterfall-item",class:{bounceIn:"show"==e.state}},[e.data.src?i("img",{staticClass:"waterfall-img",staticStyle:{width:"100%"},attrs:{src:e.data.src}}):t._e(),t._v(" "+t._s(e.index)+"-"+t._s(e.data.text)+" ")])}}])})],1)])},m=[],p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"main",style:{height:t.maxH+"px"},attrs:{id:"main"}},[t._l(t.list,(function(e,s){return i("div",{key:s,ref:"item"+s,refInFor:!0,staticClass:"item",class:[t.moveMode,t.styleArr[s]&&t.styleArr[s].showClass],style:t.styleArr[s]},[t._t("default",null,{state:t.styleArr[s]&&t.styleArr[s].state||"loading",data:e,index:s})],2)})),t.autoResize?i("iframe",{ref:"autoExpand",staticClass:"autoExpand"}):t._e()],2)},d=[];let u={},f=new Map,b=null;var x={props:{list:{type:Array,default:()=>[]},imgKey:{type:String,default:"src"},col:{type:Number,default:0},colWidth:{type:Number,default:0},autoResize:{type:Boolean,default:!0},fillBox:{type:Boolean,default:!1},moveMode:{type:String,default:"transform"},moveTransitionDuration:{type:Number,default:.4}},data(){return{styleArr:[],colW:0,maxH:1,mainW:0,_col:0,__col:0,batchCB:null,onRender:null}},computed:{resizeDebounce(){return this.isTransition?this.debounce(this.resize,100):this.resize},isTransition(){return this.autoResize&&this.col<1}},mounted(){this.mainW=this.getWidth(),this.init(),this.polling()},watch:{["list.length"]:{deep:!1,async handler(t,e){t>e&&(await this.$nextTick(),this.batchCB=this.initItem(e))}},autoResize:{handler(t){t&&setTimeout(()=>{this.$refs.autoExpand.contentWindow.onresize=t=>{this.resizeDebounce()}})},immediate:!0}},methods:{async repaints(t=0,e){await this.$nextTick(),this.mainW=this.getWidth(),this.calcCol(),this.calcXY(t,"repaints",e)},init(t=0){this.calcCol(),this.batchCB=this.initItem(t)},getWidth(){return(this.$refs.main.getBoundingClientRect()||{}).width||0},async resize(t=0){if(!this.$refs.main)return;let e=this.getWidth();e!=this.mainW&&(this.mainW=e,this.calcCol(),this.autoResize&&(this.fillBox||this.col||this.__col!=this._col)&&this.calcXY(t,"resize"))},calcCol(){let t=3;return this.col?(t=this.col,this.colW=this.mainW/t):this.colWidth?(t=parseInt(this.mainW/this.colWidth)||1,this.mainW%this.colWidth&&this.fillBox?this.colW=this.mainW/t:this.colW=this.colWidth):this.colW=this.mainW/t,this.__col=t,t},polling(){clearInterval(b),b=setInterval(()=>{for(let t of f){let e=t[0];if(t=t[1],!(t.img.height>0||t.img.complete))return;t.cb(t.img),f.delete(e)}},300)},initItem(t=0){let e=this.list.slice(t),i=0;e.forEach((s,r)=>{let n=r+t;this.styleArr[n]||(this.styleArr[n]={}),this.styleArr[n].width=this.colW+"px",this.loader(s[this.imgKey],()=>{i++,this.styleArr[n].complete=!0,this.styleArr[n].state="complete",this.$set(this.styleArr,n,this.styleArr[n]),i==e.length&&this.waitRender(t)},this.getColDom(n).getElementsByClassName("waterfall-img")[0],r)})},waitRender(t){for(var e=0;e<this.styleArr.length;e++)if(e<t&&(!this.styleArr[e]||!this.styleArr[e].complete))return;this.calcXY(t)},async calcXY(t=0,e="data",i){let s=t;this._col=this.__col;for(let r=t;r<this.styleArr.length;r++)this.styleArr[r]&&this.styleArr[r].complete&&(this.styleArr[r].width=this.colW+"px",this.styleArr[r].showClass&&(i||this.isTransition?this.styleArr[r]["transition-duration"]=(i||this.moveTransitionDuration)+"s":this.styleArr[r].showClass&&(this.styleArr[r]["transition-duration"]="0s")));await this.$nextTick();for(let r=s;r<this.styleArr.length;r++){if(!this.styleArr[r]||!this.styleArr[r].complete)return;const t=this.getColDom(r);if(!t)return;this.styleArr[r].height=t.offsetHeight;let e=this.getMinCol(r);const i=e.curTop,s=e.curCol,n=i+this.styleArr[r].height,a=e.maxH>n?e.maxH:n;"convention"==this.moveMode?(this.styleArr[r].left=s*this.colW+"px",this.styleArr[r].top=i+"px"):this.styleArr[r].transform=`translate3d(${s*this.colW}px, ${i}px ,0)`,this.maxH=a,this.styleArr[r].bottomTop=n,this.styleArr[r].col=s,this.styleArr[r].showClass="show",this.styleArr[r].state="show"}this.$forceUpdate(),await this.$nextTick(),this.onRender&&this.onRender({cause:e,start:t})},getMinCol(t){if(!t)return{curCol:0,curTop:0,maxH:0};let e=0,i=0,s={};for(let n=t-1;n>=0;n--){const t=this.styleArr[n];if(t&&!s[t.col]&&(s[t.col]=t),Object.keys(s).length==this.__col)break}let r=Object.values(s).sort((t,e)=>t.bottomTop-e.bottomTop);return t<this.__col?(e=t,i=0):(e=r[0].col,i=r[0].bottomTop),{curCol:e,curTop:i,maxH:r[r.length-1].bottomTop}},loader(t,e,i={},s){if(i.height>0)return e(i);if(!t&&!i.src)return e();i.src&&(t=i.src);let r=u[t]&&u[t].img;if(r){if(r.complete||r.height>0)return e(r)}else{if(i.src?r=i:(r=new Image,r.src=t),r.complete||r.height>0)return e(r);u[t]={img:r,cbs:[],i:s},f.set(r.src,{img:r,cb:()=>{u[t].cbs.forEach(t=>t()),u[t].cbs.length=0}})}u[t].cbs.push(e)},getColDom(t){return this.$refs["item"+t][0]},debounce(t,e){let i;return function(){let s=arguments;i&&clearTimeout(i),i=setTimeout(()=>{t.apply(this,s)},e)}}}},y=x,k=(i("9cb3"),Object(a["a"])(y,p,d,!1,null,"1bc1cec6",null)),j=k.exports;let v=[{src:"https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/513/513-bigskin-4.jpg",text:"天狼绘梦者"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/513/513-bigskin-3.jpg",text:"梁祝"},{src:"",text:"兼容无图模式兼容无图模式兼容无图模式兼容无式"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/513/513-bigskin-2.jpg",text:"修竹墨客"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/513/513-bigskin-1.jpg",text:"惊鸿之笔"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/528/528-bigskin-1.jpg",text:"孤猎"},{src:"https://pic2.52pk.com/files/190419/7913716_103558_1_lit.jpg",text:"瑶妹"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/528/528-bigskin-2.jpg",text:"鲨之猎刃"},{src:"https://pic2.52pk.com/files/190419/7913716_103610_1_lit.jpg",text:"瑶妹"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/531/531-bigskin-1.jpg",text:"破镜之刃"},{src:"https://up.enterdesk.com/edpic/09/27/bb/0927bb0c7831705c2123d5f481f7761b.jpg",text:"露娜紫霞仙子"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/531/531-bigskin-2.jpg",text:"冰刃幻境"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/531/531-bigskin-3.jpg",text:"炽阳神光"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/518/518-bigskin-3.jpg",text:"神威"},{src:"https://up.enterdesk.com/edpic/d6/be/a7/d6bea7953a832383937b5a95cb21bacb.jpg",text:"街头霸王"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/518/518-bigskin-2.jpg",text:"幸存者"},{src:"https://up.enterdesk.com/edpic/80/e7/28/80e7287dfc378f23cd495bb2090d651f.jpg",text:"白龙吟"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/518/518-bigskin-1.jpg",text:"冷晖之枪"},{src:"https://up.enterdesk.com/edpic/c1/45/fc/c145fcb10e8ac99dd2cd94d686b602ee.jpg",text:"宫本武藏地狱之眼"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/125/125-bigskin-3.jpg",text:"云间偶戏"},{src:"https://up.enterdesk.com/edpic/f8/ea/79/f8ea79b40880e7b2eeeb31b81ff039f9.jpg",text:"蔡文姬天籁弦音"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/125/125-bigskin-2.jpg",text:"午夜歌剧院"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/125/125-bigskin-1.jpg",text:"无间傀儡"},{src:"https://up.enterdesk.com/edpic/18/63/5d/18635de8c11372bb3f3820c4b5266c39.jpeg",text:"王昭君我是歌手"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-6.jpg",text:"飞衡"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-5.jpg",text:"逐梦之影"},{src:"https://up.enterdesk.com/edpic/79/34/a5/7934a552d1152c99554ab31ab7b2bc1d.jpg",text:"孙膑未来之旅"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-4.jpg",text:"白龙吟"},{src:"https://up.enterdesk.com/edpic/20/0e/86/200e863afeadfb9a17620997651046eb.jpeg",text:"成吉思汗苍狼末裔"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-3.jpg",text:"教廷特使"},{src:"https://up.enterdesk.com/edpic/a3/a0/2c/a3a02c9814cae45f190bbee1db811da1.jpg",text:"兰陵王刺客信条"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-2.jpg",text:"街头霸王"},{src:"https://up.enterdesk.com/edpic/8c/ec/73/8cec7372c5415d24d3a76a58fce0288a.jpg",text:"白起最终兵器"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/150/150-bigskin-1.jpg",text:"国士无双"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/196/196-bigskin-4.jpg",text:"朱雀志"},{src:"https://up.enterdesk.com/edpic/3e/e4/4e/3ee44e9f9c0fb551a31ff899e6ae829a.jpeg",text:"花木兰传说之刃皮肤"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/196/196-bigskin-3.jpg",text:"特工魅影"},{src:"https://up.enterdesk.com/edpic/e0/dc/42/e0dc420df3f31fc1d045b9f26525e4b5.jpeg",text:"孙尚香蔷薇玫瑰皮肤"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/196/196-bigskin-2.jpg",text:"绝影神枪"},{src:"https://up.enterdesk.com/edpic/0b/79/c3/0b79c31bbf32d0b41d35d83d2084d562.jpg",text:"达摩拳皇"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/196/196-bigskin-1.jpg",text:"静谧之眼"},{src:"//game.gtimg.cn/images/yxzj/img201606/skin/hero-info/163/163-bigskin-2.jpg",text:"修罗"}];var w=v;let _=window.innerWidth>window.innerHeight;var z={name:"vue-waterfall-rapid",components:{waterfall:j},data(){return{width:100,range:100,autoResize:!0,col:0,fillBox:!1,colWidth:(_?window.innerHeight:window.innerWidth)/5.07,mode:0,list:w.slice(0,_?24:18)}},watch:{range(t){this.width=30+.7*t},fillBox(){this.repaints(0,.4)}},mounted(){this.$refs.waterfall.onRender=t=>{};let t=18;setTimeout(()=>{setInterval(()=>{if(t++,t>51)return;let e=w[t%w.length];this.list.push(e)},50)},1e3)},methods:{add(){let t=w[parseInt(Math.random()*w.length)];this.list.push(t)},modeFun(){this.mode=!this.mode,this.col=this.mode?3:0,this.repaints(0,.4)},repaints(){this.$refs.waterfall.repaints(0,.4)},scroll(t){}}},A=z,C=(i("21bb"),Object(a["a"])(A,h,m,!1,null,null,null)),W=C.exports;s["a"].use(g["a"]);const T=new g["a"]({routes:[{path:"/",name:"Home",component:W}]});var R=T;s["a"].config.productionTip=!1,new s["a"]({router:R,render:t=>t(l)}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"96f1":function(t,e,i){},"9c0c":function(t,e,i){},"9cb3":function(t,e,i){"use strict";i("96f1")}});
//# sourceMappingURL=app.a2afc2f2.js.map